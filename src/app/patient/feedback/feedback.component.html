<div class="container">
  <h2>Submit Feedback</h2>

  <div class="form-group">
    <label for="patientName">Patient Name:</label>
    <input
      id="patientName"
      type="text"
      [(ngModel)]="patientName"
      placeholder="Enter patient name"
    />
    <button (click)="fetchAppointmentsByPatientName()" class="btn">
      Fetch Appointments
    </button>
  </div>

  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
  <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>

  <div *ngIf="appointments.length > 0" class="form-group">
    <label for="appointmentSelect">Select Appointment:</label>
    <select
      id="appointmentSelect"
      [(ngModel)]="selectedAppointmentId"
      required
    >
      <option [value]="null" disabled>Select an appointment</option>
      <option *ngFor="let appointment of appointments" [value]="appointment.appointmentId">
        {{ appointment.appointmentDate | date:'mediumDate' }} with Dr. {{ appointment.doctorName }}
      </option>
    </select>
  </div>

  <div *ngIf="appointments.length > 0" class="form-group">
    <label for="feedback">Feedback:</label>
    <textarea
      id="feedback"
      [(ngModel)]="feedback"
      placeholder="Write your feedback here"
      rows="4"
    ></textarea>
  </div>

  <div *ngIf="appointments.length > 0" class="form-group rating-group">
    <label>Rating:</label>
    <select [(ngModel)]="rating">
      <option *ngFor="let r of [1,2,3,4,5]" [value]="r">{{ r }}</option>
    </select>
  </div>

  <button
    *ngIf="appointments.length > 0"
    (click)="submitFeedback()"
    class="submit-btn"
  >
    Submit Feedback
  </button>
</div>